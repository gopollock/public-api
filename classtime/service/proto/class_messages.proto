syntax = "proto3";

package classtime.service.classes.api;

import "class_entities.proto";
import "common_messages.proto";

option java_multiple_files = true;
option java_outer_classname = "ClassMessagesProto";
option java_package = "classtime.service.classes.api";

message CreateClassRequest {
  option (classtime.service.common.public_api) = true;
  string title = 1;
  string subject = 2;
  string teacher_classtime_id = 3;

  oneof roster_ref {
    string classlink_class_ref = 4;
    string clever_class_ref = 5;
  }
}

message CreateClassResponse {
  option (classtime.service.common.public_api) = true;
  ClassInfo class_info = 1;
}

message GetOrCreateClassRequest {
  string title = 1;
  string subject = 2;
  string teacher_classtime_id = 3;
  oneof roster_class_ref {
    string classlink_class_ref = 4;
    string clever_class_ref = 6;
  }
  string organization_ref = 5;
  string grade = 7;
}

message GetOrCreateClassResponse {
  ClassInfo class_info = 1;
}

message UpdateClassInfoRequest {
  reserved 4;

  string class_id = 1;
  string title = 2;
  string subject = 3;
  string owner_classtime_id = 5;
  string grade = 6;
}

message UpdateClassInfoResponse {
  ClassInfo class_info = 1;
}

message GetCoTeachersRequest {
  string class_id = 1;
}

message GetCoTeachersResponse {
  repeated classtime.service.common.CollaboratorInfo collaborators = 1;
  classtime.service.common.SchoolInfo school = 2;
  string organization_id = 3;
}

message UpdateCoTeachersRequest {
  option (classtime.service.common.public_api) = true;
  string class_id = 1;
  string school_id = 2;
  repeated string account_ids = 3; // classtime_ids
  string class_owner_id = 4;
}

message UpdateCoTeachersResponse {
  option (classtime.service.common.public_api) = true;
  repeated classtime.service.common.CollaboratorInfo collaborators = 3;
}

message RemoveStudentsRequest {
  string class_id = 1;
  repeated string student_account_ids = 2;
}

message RemoveStudentsResponse {
  ClassInfo class_info = 1;
}

message AddStudentsRequest {
  string class_id = 1;
  repeated string student_emails = 2;
  repeated string account_ids = 3;
}

message AddStudentsResponse {
  ClassInfo class_info = 1;
}

message GetClassInfoRequest {
  string class_id = 1;
}

message GetClassInfoResponse {
  ClassInfo class_info = 1;
}

message GetClassesRequest {}

message GetClassesResponse {
  message ClassInfo {
    string id = 1;
    bool is_owner = 2; // used for teacher
    string code = 3;
  }

  repeated ClassInfo classes = 1;
}
